<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TCP/IP: Projeto de Programação</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TCP/IP
   </div>
   <div id="projectbrief">Simula a conexão entre o servidor e o cliente</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Busca');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Busca');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Projeto de Programação </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Apresentação</h2>
<p>O presente projeto visa desenvolver o aluno na prática de programação orientada a objetos usando a biblioteca Qt.</p>
<p>O projeto consiste em três programas de computador que trabalham em conjunto para simular um sistema simples de aquisição e supervisão de dados usando comunicação TCP/IP em uma rede local.</p>
<p>Em suma, os três módulos devem ser capazes de realizar as seguintes operações:</p>
<ul>
<li>O <b>servidor</b> deve esperar conexões TCP destinadas à porta 1234, e responder ao cliente conforme os comandos que este enviar.</li>
<li>O <b>cliente produtor</b> de dados deve ser capaz de se conectar a uma máquina executando o servidor na porta 1234 e enviar, usando comandos específicos, marcações de data/hora juntamente com uma informação em ponto flutuante para ser gravada.</li>
<li>O <b>cliente supervisor</b> de dados deve ser capaz de se conectar a uma máquina executando o servidor na porta 1234 e recuperar, usando comandos específicos, a lista dos clientes produtores de dados, bem como listagens de dados produzidos por um destes clientes produtores.</li>
</ul>
<p>O aluno deverá desenvolver apenas os <b>cliente produtor</b> e o <b>cliente supervisor</b>. O módulo <b>servidor</b> já está pronto e não precisa ser trabalhado.</p>
<h2>O módulo servidor</h2>
<p>O módulo servidor implementa o que se chama de servidor TCP. Em outras palavras, esse programa é capaz de escutar a rede local e aguardar por conexões remotas destinadas à porta TCP/1234.</p>
<p>Em redes TCP/IP, o protocolo de comunicação TCP permite a criação de um circuito virtual, um canal de comunicação que pode ser usado para enviar e receber sequências de bytes pela Internet. O canal é fechado apenas quando a conexão é interrompida.</p>
<p>Para se abrir uma conexão com uma máquina que executa um determinado serviço usando o protocolo TCP é necessário que se conheça seu endereço IP (ou nome) e uma <em>porta</em> onde o serviço será provido. Quando a conexão é aberta para um novo cliente, inicia-se um <em>socket</em> de comunicação, identificado, entre outras coisas, pela combinação IP+porta. Cada <em>socket</em> possui um número único que pode ser usado para distinguir entre as várias conexões que podem chegar à mesma porta. Isso é comum em máquinas que provêem serviços a vários clientes.</p>
<p>Máquinas que aguardam conexões comumente chamadas de <b>servidores</b>. O servidor implementado neste projeto <em>escuta</em> a porta <b>1234</b>. Uma vez que um cliente se conecte a esta, as tarefas que o servidor irá executar dependerão de mensagens enviadas pelo cliente. Para cada mensagem, uma tarefa diferente é executada. É dessa maneira que os vários serviços na Internet funcionam.</p>
<p>O servidor do projeto não necessita de modificações para funcionar. Basta abrir o projeto no QtCreator, compilar e executar o código. O servidor é capaz de interpretar mensagens em texto simples que lhe forem enviadas. As mensagens aceitas pelo servidor formam o que se chama de <b>protocolo de aplicação</b> para este serviço. Três mensagens são suportadas nesse protocolo:</p>
<div class="fragment"><div class="line">list</div><div class="line">get NUMERO_IP N_AMOSTRAS</div><div class="line">set DATA_E_HORA_EM_MS DADO</div></div><!-- fragment --><p>O comando **_list_** retorna a lista de máquinas cujos dados produzidos encontram-se armazenados no servidor. ex: </p><div class="fragment"><div class="line">$ telnet 127.0.0.1 1234</div><div class="line">list</div><div class="line">127.0.0.1</div></div><!-- fragment --><p>O comando **_get_** precisa que se forneça também o número IP do <b>cliente produtor</b> que se deseja recuperar o conjunto de dados produzidos. ex:</p>
<div class="fragment"><div class="line">$ telnet 127.0.0.1 1234</div><div class="line">get 127.0.0.1 1</div><div class="line">1496658174409 34</div></div><!-- fragment --><p>O comando **_set_** precisa que se forneça uma combinação DATA e HORA, bem como o dado que se deseja armazenar no servidor. ex:</p>
<div class="fragment"><div class="line">$ telnet 127.0.0.1 1234</div><div class="line">set 127.0.0.1</div><div class="line">set 1496658174409 34</div></div><!-- fragment --><p>Todos os comandos devem ser enviados na forma de literais. O indicador de data/hora é um long que armazena a quantidade de milisegundos passados desde a data 1/1/1970. O servidor, uma vez que receba essas sequências de literais, separa-as conforme a quantidade de espaços presentes e armazena os dados associados em uma estrutura local criada para esse fim.</p>
<p>Em se tratando de um projeto meramente acadêmico, pouco controle de erro é realizado nessa versão inicial.</p>
<p>Quando o servidor é executado, uma mensagem é exibida na aba <b>Application Output</b> do QtCreator mostrando o IP local do servidor, como ilustram as linhas a seguir:</p>
<div class="fragment"><div class="line">server started at:</div><div class="line">&quot;192.168.1.106&quot;</div></div><!-- fragment --><h2>O módulo cliente produtor de dados</h2>
<p>O cliente produtor de dados deve ser capaz de se conectar a um servidor em execução e enviar comandos <b>set</b> para este servidor. Espera-se que esse módulo seja capaz de simular um processo de coleta e envio de dados para o servidor em intervalos periódicos.</p>
<p>A construção do cliente deve possibilitar o envio de dados (possivelmente aleatórios) para o servidor em intervalos regulares de tempo. Para isso, seu usuário deverá ser capaz de realizar as seguintes operações no módulo produtor:</p>
<ul>
<li>Indicar o IP do servidor ao qual se deseja conectar</li>
<li>Indicar a faixa de valores (min-max) que poderão ser enviados ao servidor</li>
<li>Indicar o intervalo de tempo entre o envio de dois dados consecutivos</li>
<li>Realizar a conexão ao pressionar um botão</li>
<li>Iniciar a transmissão de dados ao pressionar um botão</li>
<li>Finalizar a transmissão de dados ao pressionar um botão</li>
<li>Exibir os dados enviados em uma janela de texto</li>
</ul>
<p>Um exemplo de interface para o módulo produtor de dados é mostrado na figura que segue:</p>
<div class="image">
<img src="images/dataproducer.png" alt="Produtor de dados"/>
</div>
<h2>Consumidor de dados</h2>
<p>O consumidor de dados assume um papel mais complexo que o produtor. O produtor deve ser capaz de se conectar a um servidor indicado, recuperar os endereços das máquinas que produziram dados e traçar um gráfico data-hora x valor de uma sequência de dados fornecida pelo servidor.</p>
<p>O usuário do módulo consumidor de dados, o usuário deverá ter à sua disposição as seguintes funcionalidades:</p>
<ul>
<li>Indicar o endereço IP do servidor de dados ao qual o cliente deverá se conectar.</li>
<li>Iniciar a conexão com o servidor ao se pressionar um botão.</li>
<li>Uma vez conectado, o usuário deverá ter a disposição uma lista das máquinas que produziram dados no servidor. Isso pode ser implementado usando um <b>listwidget</b>.</li>
<li>No <b>listwidget</b> o usuário deverá ser capaz de selecionar a máquina cujos dados deseja visualizar.</li>
<li>Com uma máquina selecionada, dois botões deverão ficar disponíveis para o usuário: um para começar a receber os dados e outro para parar de receber.</li>
<li>Deverá ficar disponível a possibilidade de modificar o intervalo de tempo de captura entre dois conjuntos de dados consecutivos, ou seja, entre o envio de dois comandos _get </li>
</ul>
<p>Para cada recepção de dados, a ferramenta deverá traçar o gráfico tempo x valor do conjunto de dados lido do servidor. Algumas formas de traçado podem ser consideradas:</p>
<ul>
<li>Traçar todo intervalo de valores lido do servidor.</li>
<li>Traçar um subintervalo dos valores lidos (ex: desenhar apenas as últimas 30 amostras obtidas). Isso pode interessante para evitar que o gráfico fique sobrecarregado.</li>
</ul>
<p>Um exemplo de interface para o módulo consumidor de dados é mostrado na figura que segue:</p>
<div class="image">
<img src="images/dataconsumer.png" alt="Produtor de dados"/>
</div>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
